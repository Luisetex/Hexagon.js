!function(){var a=function(a){this.sides=a.sides||3,this.size=a.size||10,this.canvas=a.canvas||{},cx=this.canvas.width/2||0,cy=this.canvas.height/2||0,this.draw=function(a,b,c,d){var e=a.getContext("2d");cx=this.canvas.width/2||0,cy=this.canvas.height/2||0,e.beginPath(),e.moveTo(cx+this.size*Math.cos(0),cy+this.size*Math.sin(0));for(var f=1;f<=this.sides;f++)e.lineTo(cx+this.size*Math.cos(2*f*Math.PI/this.sides),cy+this.size*Math.sin(2*f*Math.PI/this.sides));e.shadowOffsetY=d,e.shadowColor="rgba(0,0,0,.2)",e.fillStyle=b,e.strokeStyle=c,e.lineCap="round",e.lineWidth=d,e.fill(),e.stroke(),e.shadowOffsetY=0,e.shadowColor=""}},b=function(a){this.amount=a.amount||3,this.draw=function(a,b){for(var c=a.getContext("2d"),d=a.width/2,e=a.height/2,f=a.width>a.height?a.width:a.height,g=1;g<=this.amount;g++)c.beginPath(),c.moveTo(d,e),c.lineTo(d+f*Math.cos(2*g*Math.PI/this.amount),e+f*Math.sin(2*g*Math.PI/this.amount)),c.lineTo(d+f*Math.cos((g+1)%this.amount*2*Math.PI/this.amount),e+f*Math.sin((g+1)%this.amount*2*Math.PI/this.amount)),c.fillStyle=b[g%2],c.fill()}},c=function(a){this.walls=[!1,!1,!1,!1,!1,!1],this.distance=a.distance||250,this.width=a.width||50;var b=function(a){for(var b=0;b<a.length;b++)if(0==a[b])return!0;return!1};this.generatePattern=function(a){for(var c=0;a>c;c++)this.walls[c]=Boolean(Math.round(Math.random()));b(this.walls)||this.generatePattern(a)},this.draw=function(a,b){for(var c=a.getContext("2d"),d=a.width/2,e=a.height/2,f=0;f<this.walls.length;f++)this.walls[f]&&(c.beginPath(),c.moveTo(d+this.distance*Math.cos(2*f*Math.PI/6),e+this.distance*Math.sin(2*f*Math.PI/6)),c.lineTo(d+this.distance*Math.cos(2*(f+1)*Math.PI/6),e+this.distance*Math.sin(2*(f+1)*Math.PI/6)),c.lineTo(d+(this.distance-this.width)*Math.cos(2*(f+1)*Math.PI/6),e+(this.distance-this.width)*Math.sin(2*(f+1)*Math.PI/6)),c.lineTo(d+(this.distance-this.width)*Math.cos(2*f*Math.PI/6),e+(this.distance-this.width)*Math.sin(2*f*Math.PI/6)),c.closePath(),c.fillStyle=b,c.fill())}},d=function(a){this.canvas=a.canvas||{},this.color=a.color||"#fff",this.strokeColor=a.strokeColor||"#000",this.strokeWidth=a.strokeWidth||0,this.size=a.size||5,this.radius=a.radius||50,this.speed=a.speed||4,this.dir=0,this.angle=0,this.draw=function(){var a=this.canvas.getContext("2d"),b=this.canvas.width/2+this.radius*Math.cos(this.angle*Math.PI/180),c=this.canvas.height/2+this.radius*Math.sin(this.angle*Math.PI/180);this.angle=(this.angle+this.dir*this.speed)%360,a.translate(b,c),a.rotate(this.angle*Math.PI/180),a.translate(-b,-c),a.beginPath(),a.moveTo(b-this.size,c-this.size),a.lineTo(b+this.size,c),a.lineTo(b-this.size,c+this.size),a.closePath(),a.shadowOffsetY=this.size/2,a.shadowColor="rgba(255,255,255,.2)",a.fillStyle=this.color,a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.stroke(),a.fill(),a.shadowOffsetY=0,a.shadowColor="",a.translate(b,c),a.rotate(-this.angle*Math.PI/180),a.translate(-b,-c)}};Hexagon=function(e){if("undefined"==typeof e)throw new Error("No args provided");if("undefined"==typeof e.canvas)throw new Error("No canvas provided");this.canvas=e.canvas,this.ctx=this.canvas.getContext("2d"),this.angleSpeed=e.angleSpeed||2,this.rays=new b({amount:6}),this.hexagon=new a({canvas:this.canvas,sides:6,size:50}),this.cursor=new d({canvas:this.canvas,size:7,color:"#33E566",strokeColor:"rgba(0,0,0,0)",strokeWidth:1,radius:75,speed:5}),this.wallSpeed=e.wallSpeed||2,this.minDist=Math.sqrt(Math.pow(this.canvas.width,2)+Math.pow(this.canvas.height,2))/2,this.walls=[null,null,null,null];for(var f=0;f<this.walls.length;f++)this.walls[f]=new c({distance:this.minDist+this.minDist/3*(f+1)}),this.walls[f].generatePattern(6);var g;this.play=function(){var a=this;document.onkeydown=function(b){a.moveCursor(b)},document.onkeyup=function(b){a.stopCursor(b)},g=requestAnimationFrame(h.bind(this))},this.moveCursor=function(a){var b=a.which||a.keyCode;39==b?this.cursor.dir=1:37==b&&(this.cursor.dir=-1)},this.stopCursor=function(a){var b=a.which||a.keyCode;(39==b&&1==this.cursor.dir||37==b&&-1==this.cursor.dir)&&(this.cursor.dir=0)};var h=function(){this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.translate(this.canvas.width/2,this.canvas.height/2),this.ctx.rotate(this.angleSpeed*Math.PI/180),this.ctx.translate(-this.canvas.width/2,-this.canvas.height/2),this.rays.draw(this.canvas,["#000","#082410"]);for(var a=0;a<this.walls.length;a++)this.walls[a].draw(this.canvas,"#33E566"),this.walls[a].distance-=this.wallSpeed,this.walls[a].distance<=0&&(this.walls[a].distance=this.minDist+this.minDist/3,this.walls[a].generatePattern(6));this.hexagon.draw(this.canvas,"#000","#33E566",7),this.cursor.draw(),g=requestAnimationFrame(h.bind(this))};return this}}();