!function(){var a=function(){this.interpolateColor=function(a,b,c,d){function e(a){return a.toString(16)}function f(a){return parseInt(a,16)}if(0==d)return a;if(d==c)return b;for(var g="#",h=1;6>=h;h+=2){for(var i=new Number(f(a.substr(h,2))),j=new Number(f(b.substr(h,2))),k=i+(j-i)*(d/c),l=e(Math.floor(k));l.length<2;)l="0"+l;g+=l}return g}},b=function(a){this.sides=a.sides||3,this.size=a.size||10,this.canvas=a.canvas||{},cx=this.canvas.width/2||0,cy=this.canvas.height/2||0,this.draw=function(a,b,c,d){var e=a.getContext("2d");cx=this.canvas.width/2||0,cy=this.canvas.height/2||0,e.beginPath(),e.moveTo(cx+this.size*Math.cos(0),cy+this.size*Math.sin(0));for(var f=1;f<=this.sides;f++)e.lineTo(cx+this.size*Math.cos(2*f*Math.PI/this.sides),cy+this.size*Math.sin(2*f*Math.PI/this.sides));e.fillStyle=b,e.strokeStyle=c,e.lineCap="round",e.lineWidth=d,e.fill(),e.stroke()}},c=function(a){this.amount=a.amount||3,this.draw=function(a,b){for(var c=a.getContext("2d"),d=a.width/2,e=a.height/2,f=a.width>a.height?a.width:a.height,g=1;g<=this.amount;g++)c.beginPath(),c.moveTo(d,e),c.lineTo(d+f*Math.cos(2*g*Math.PI/this.amount),e+f*Math.sin(2*g*Math.PI/this.amount)),c.lineTo(d+f*Math.cos((g+1)%this.amount*2*Math.PI/this.amount),e+f*Math.sin((g+1)%this.amount*2*Math.PI/this.amount)),c.fillStyle=b[g%2],c.fill()}},d=function(a){this.walls=[!1,!1,!1,!1,!1,!1],this.distance=a.distance||250,this.width=a.width||50;var b=function(a){for(var b=0;b<a.length;b++)if(0==a[b])return!0;return!1};this.generatePattern=function(a){for(var c=0;a>c;c++)this.walls[c]=Boolean(Math.round(Math.random()));b(this.walls)||this.generatePattern(a)},this.draw=function(a,b){for(var c=a.getContext("2d"),d=a.width/2,e=a.height/2,f=0;f<this.walls.length;f++)this.walls[f]&&(c.beginPath(),c.moveTo(d+this.distance*Math.cos(2*f*Math.PI/6),e+this.distance*Math.sin(2*f*Math.PI/6)),c.lineTo(d+this.distance*Math.cos(2*(f+1)*Math.PI/6),e+this.distance*Math.sin(2*(f+1)*Math.PI/6)),c.lineTo(d+(this.distance-this.width)*Math.cos(2*(f+1)*Math.PI/6),e+(this.distance-this.width)*Math.sin(2*(f+1)*Math.PI/6)),c.lineTo(d+(this.distance-this.width)*Math.cos(2*f*Math.PI/6),e+(this.distance-this.width)*Math.sin(2*f*Math.PI/6)),c.closePath(),c.fillStyle=b,c.strokeStyle=b,c.lineWidth=1,c.fill(),c.stroke())},this.checkCollision=function(a,b){for(var c=0;c<this.walls.length;c++){var d=60*c,e=60*(c+1);if(this.walls[c]&&d<=a.a&&e>=a.a&&this.distance-this.width<=a.d&&this.distance>=a.d)return!0}return!1}},e=function(a){this.canvas=a.canvas||{},this.color=a.color||"#fff",this.strokeColor=a.strokeColor||"#000",this.strokeWidth=a.strokeWidth||0,this.size=a.size||5,this.radius=a.radius||50,this.speed=a.speed||4,this.dir=0,this.angle=30,this.draw=function(){var a=this.canvas.getContext("2d"),b=this.canvas.width/2+this.radius*Math.cos(this.angle*Math.PI/180),c=this.canvas.height/2+this.radius*Math.sin(this.angle*Math.PI/180);this.angle=this.angle+this.dir*this.speed,this.angle<0?this.angle=360-this.angle:this.angle>360&&(this.angle%=360),a.translate(b,c),a.rotate(this.angle*Math.PI/180),a.translate(-b,-c),a.beginPath(),a.moveTo(b-this.size,c-this.size),a.lineTo(b+this.size,c),a.lineTo(b-this.size,c+this.size),a.closePath(),a.fillStyle=this.color,a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.stroke(),a.fill(),a.translate(b,c),a.rotate(-this.angle*Math.PI/180),a.translate(-b,-c)},this.getCoord=function(){this.canvas.getContext("2d"),this.canvas.width/2+this.radius*Math.cos(this.angle*Math.PI/180),this.canvas.height/2+this.radius*Math.sin(this.angle*Math.PI/180);return{a:this.angle,d:this.radius+2*this.size}}},f=function(a){return this.element,this.label,this.text,this.start=Date.now(),this.init=function(){return this.element=document.createElement("div"),this.element.classList.add("hjs"),this.element.classList.add("timer"),document.getElementsByTagName("body")[0].appendChild(this.element),this.text=document.createElement("span"),this.element.appendChild(this.text),this.label=document.createElement("div"),this.label.classList.add("hjs"),this.label.classList.add("label"),this.label.innerHTML="TIME",this.element.appendChild(this.label),this},this.update=function(a){var b=Date.now()-this.start,c=Math.floor(b/1e3),d=Math.floor((b-1e3*c)/10);d=("0"+d).slice(-2),this.text.innerHTML=c+":"+d},this};Hexagon=function(g){if("undefined"==typeof g)throw new Error("No args provided");if("undefined"==typeof g.canvas)throw new Error("No canvas provided");this.canvas=g.canvas,this.ctx=this.canvas.getContext("2d"),this.angleSpeed=g.angleSpeed||2,this.rays=new c({amount:6}),this.hexagon=new b({canvas:this.canvas,sides:6,size:1e3}),this.cursor=new e({canvas:this.canvas,size:7,color:"#6EA796",strokeColor:"rgba(0,0,0,0)",strokeWidth:1,radius:75,speed:5}),this.wallSpeed=g.wallSpeed||2,this.minDist=Math.sqrt(Math.pow(this.canvas.width,2)+Math.pow(this.canvas.height,2))/2,this.walls=[null,null,null,null],this.timer=(new f).init(this.canvas),this.wallColors=g.wallColors||["#1EAAA5","#4EFC96"],this.currentWallColor=this.wallColors[0],this.backgroundColors=g.backgroundColors||["#0A2727","#103D3D"];for(var i,h=new a,j=0,k=0,l=1,m=0;m<this.walls.length;m++)this.walls[m]=new d({distance:this.minDist+this.minDist/3*(m+1)}),this.walls[m].generatePattern(6);this.play=function(){var a=this;document.onkeydown=function(b){a.moveCursor(b)},document.onkeyup=function(b){a.stopCursor(b)},i=requestAnimationFrame(n.bind(this))},this.moveCursor=function(a){var b=a.which||a.keyCode;39==b?this.cursor.dir=1:37==b&&(this.cursor.dir=-1)},this.stopCursor=function(a){var b=a.which||a.keyCode;(39==b&&1==this.cursor.dir||37==b&&-1==this.cursor.dir)&&(this.cursor.dir=0)};var n=function(){var a=!1,b=60>=j%120?j%120:60-(j%120-60);this.currentWallColor=h.interpolateColor(this.wallColors[0],this.wallColors[1],60,b),this.ctx.fillStyle=this.backgroundColors[k],this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.translate(this.canvas.width/2,this.canvas.height/2),this.ctx.rotate(this.angleSpeed*Math.PI/180),this.ctx.translate(-this.canvas.width/2,-this.canvas.height/2),this.rays.draw(this.canvas,[this.backgroundColors[k],this.backgroundColors[l]]);for(var c=0;c<this.walls.length;c++)this.walls[c].draw(this.canvas,this.currentWallColor),this.walls[c].distance-=this.wallSpeed,this.walls[c].distance<=0&&(this.walls[c].distance=this.minDist+this.minDist/3,this.walls[c].generatePattern(6)),this.walls[c].checkCollision(this.cursor.getCoord(),this.canvas)&&(a=!0);if(this.cursor.color=this.currentWallColor,this.cursor.draw(),this.hexagon.draw(this.canvas,this.backgroundColors[k],this.currentWallColor,7),this.hexagon.size>50&&(this.hexagon.size-=50),this.timer.update(),a){return this.hexagon.draw(this.canvas,this.backgroundColors[k],this.currentWallColor,7),this.cursor.draw(),this.cursor.dir=0,document.onkeydown=null,document.onkeyup=null,i=requestAnimationFrame(o.bind(this)),j=0,!1}j++,i=requestAnimationFrame(n.bind(this))},o=function(){if(this.angleSpeed>0&&(this.angleSpeed-=.01),this.angleSpeed<0&&(this.angleSpeed=0),this.wallSpeed>0&&(this.wallSpeed=0),18==j&&(this.wallSpeed=-50),j>=48&&this.hexagon.size<1e3&&(this.hexagon.size+=50),this.hexagon.size>=1e3){var a=this;return cancelAnimationFrame(i),window.onkeydown=function(b){var c=b.which||b.keyCode;if(32==c){a.wallSpeed=5,a.angleSpeed=1.2,a.timer.start=Date.now();for(var e=0;e<a.walls.length;e++)a.walls[e]=new d({distance:a.minDist+a.minDist/3*(e+1)}),a.walls[e].generatePattern(6);window.onkeydown=null,a.play()}},!1}this.ctx.fillStyle=this.backgroundColors[k],this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.translate(this.canvas.width/2,this.canvas.height/2),this.ctx.rotate(this.angleSpeed*Math.PI/180),this.ctx.translate(-this.canvas.width/2,-this.canvas.height/2),this.rays.draw(this.canvas,[this.backgroundColors[k],this.backgroundColors[l]]);for(var b=0;b<this.walls.length;b++)this.walls[b].draw(this.canvas,this.currentWallColor),this.walls[b].distance-=this.wallSpeed,this.walls[b].distance<=0&&(this.walls[b].distance=this.minDist+this.minDist/3,this.walls[b].generatePattern(6));this.cursor.draw(),this.hexagon.draw(this.canvas,this.backgroundColors[k],this.currentWallColor,7),j++,i=requestAnimationFrame(o.bind(this))};return this}}();